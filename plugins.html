<div class="row hidden" id="dvAlert">
	<div class="col-xs-12">
		<div class="alert alert-danger" role="alert"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>&nbsp;&nbsp;The configuration isn't correct for this functionality.  Please go and update the configuration to ensure there is a valid database server, username and password.</div>
	</div>
</div>
<div class="row">
		<div class="col-xs-10"><h4><span class="fa fa-upload" style="font-size: xx-large;margin-right: 10px;"></span>Edit/Register Modules</h4></div>
		<div class="col-xs-2"><button type="button" id="btnPluginOptions" class="btn btn-default pull-right"><i class="fa fa-cog"></i></button></div>
	</div>
<div class="card-panel hoverable">
<div class="row">
	<div class="col-xs-12">
		<div id="custom-toolbar" style="margin-bottom:10px;">
			
  <!-- Modal Trigger -->
  <button id="btnAddPlugin" class="btn"><i class="fa fa-plus"></i>&nbsp;&nbsp;New</button>
		</div>
		<table id="tblPlugins" data-toggle="table" data-show-footer="false" style="min-height: 300px;">
			<thead>
				<tr>
					<th data-field="PluginName">Name</th>
					<th data-field="PluginDescription">Description</th>
					<th data-field="RoleCount"># Roles</th>
					<th data-field="GroupCount"># Groups</th>
					<th data-field="MemberCount"># Users</th>
					<th data-formatter="OperateFormatter" data-events="operateEvents">Options</th>
				</tr>
			</thead>
		</table>
	</div>
</div>
</div>

  <!-- Modal Structure -->
  <div id="mdlPluginRoleAdd" class="modal modal-fixed-footer">
		<div class="modal-content">
		  <h4>Roles</h4>
		  <form class="form-horizontal" id="frmPluginRole" method="post" enctype="multipart/form-data" novalidate="novalidate">
			<input type="hidden" id="hdPluginRoleId" />
			<input type="hidden" id="hdPluginRolePluginId" />
			<div class="row">
					<div class="input-field col s12">
							<input id="txtPluginRoleName" name="txtPluginRoleName" type="text" class="tooltipped validate" data-position="bottom" data-delay="50" data-tooltip="Name of the role">
							<label for="txtPluginRoleName">Role</label>
							<button type="submit" id="btnAddNewPluginRole" class="btn btn-primary pull-right">Create</button>
						</div>
			</div>

			<div class="row">
				<div class="col-xs-12"><hr /></div>
				<div class="col-xs-12">
					<div class="list-group" id="dvPluginRoles"></div>
				</div>
			</div>
		</form>
		</div>
		<div class="modal-footer">
				<a href="javascript:void(0);" class="modal-action modal-close waves-effect waves-red btn-flat ">Ok</a>
		</div>
	  </div>
			  

	<!-- Modal Structure -->
	<div id="mdlPluginAdd" class="modal modal-fixed-footer">
		<form class="form-horizontal" id="frmPlugin" method="post" enctype="multipart/form-data" novalidate="novalidate">
	  <div class="modal-content">
		  <h4> Register Module</h4>
			<input type="hidden" id="hdPluginId" />
				<div class="row">
						<div class="input-field col s6">
								<input id="txtPluginName" name="txtPluginName" type="text" class="tooltipped validate" data-position="bottom" data-delay="50" data-tooltip="The Name of the Module">
								<label for="txtPluginName">Module Name</label>
							</div>
							  <div class="input-field col s6">
									<input id="txtAreaPrefix" type="text" name="txtAreaPrefix" class=" tooltipped validate" data-position="bottom" data-delay="50" data-tooltip="The area of the plugin" >
									<label for="txtAreaPrefix">Area Prefix</label>
								</div>
				</div>
			 <div class="row">
					<div class="input-field col s12">
						<input id="txtDisplayName" name="txtDisplayName" type="text" class="tooltipped validate" data-position="bottom" data-delay="50" data-tooltip="The name displayed on the home page">
						<label for="txtDisplayName">Display Name</label>
					</div>
				</div>
					<div class="row">
					<div class="input-field col s12">
						<textarea id="txtDescription" name="txtDescription" class="tooltipped materialize-textarea" data-position="bottom" data-delay="50" data-tooltip="The description of the Module"></textarea>	
						<label for="txtDescription">Description</label>
						
				</div>
				<div class="row">
						<div class="input-field col s6">
								<input id="txtCssIcon" name="txtCssIcon" type="text" class="tooltipped validate" data-position="bottom" data-delay="50" data-tooltip="The font-awesome icon for the home page">
								<label for="txtCssIcon">Module Icon</label>
							  </div>
							  <div class="input-field col s6">
									<input id="txtCategory" type="text" name="txtCategory" class=" tooltipped validate" data-position="bottom" data-delay="50" data-tooltip="The category of the plugin" >
									<label for="txtCategory">Category</label>
								  </div>
					</div>
				</div>
				<div class="row">
						<div class="input-field col s6">
								<input id="txtMainUrl" name="txtMainUrl" type="text" class="tooltipped validate" data-position="bottom" data-delay="50" data-tooltip="The home url of a plugin or the full url of an application">
								<label for="txtMainUrl">Main Url</label>
							  </div>
							  <div class="input-field col s6">
									<input id="txtTrainingUrl" type="text" name="txtTrainingUrl" class=" tooltipped validate" data-position="bottom" data-delay="50" data-tooltip="The url of the Training Video" >
									<label for="txtTrainingUrl">Training Url</label>
								  </div>
				</div>
				<div class="row">
						<div class="input-field col s6">
								<input id="txtAnonymousRole" name="txtAnonymousRole" type="text" class="tooltipped validate" data-position="bottom" data-delay="50" data-tooltip="The role for anonymous access">
								<label for="txtAnonymousRole">Anonymous Role</label>
							</div>
							  <div class="input-field col s6">
									<input id="txtOutputDirectory" type="text" name="txtOutputDirectory" class="validate">
									<label for="txtOutputDirectory">Output Directory</label>
								</div>
				</div>
				<div class="row">
						<div class="input-field col s6">
								<input id="txtSortIndex" name="txtSortIndex" type="number" min="1" max="10" step="1"  class="validate">
								<label for="txtSortIndex">Anonymous Role</label>
							</div>	
							<div class="col s3" style="margin-top: 20px;">
							<input type="checkbox" class="filled-in" id="chkIsExternal" />
							<label for="chkIsExternal">Is Application</label>
					</div>
					<div class="col s3" style="margin-top: 20px;">
						<input type="checkbox" class="filled-in" id="chkIsShowInHome" />
						<label for="chkIsShowInHome">Show In Home</label>
				</div>
				</div>
			
	  </div>
	  <div class="modal-footer">
		<a href="javascript:void(0);" id="btnCancel" class="modal-action  waves-effect waves-red btn-flat ">Close</a>
		<button id="btnAddNewPlugin" type="submit" class="modal-action waves-effect waves-green btn-flat ">Register</button>
	  </div>	
	</form>
	</div>

<script>
// You can also require other files to run in this process
	function OperateFormatter(value, row, index) {
		var htmlString = "";
					htmlString =   '<a class="dropdown-button btn" href="javascript:void(0);"  data-activates="dropdown'+row.PluginId+'"> Actions <span class="caret" style="margin-left:5px;"></span></a>' +
					  '<ul id="dropdown'+row.PluginId+'"  class="dropdown-content">' +
						'<li><a class="btn_edit" href="javascript:void(0);">Edit</a></li>'+
						'<li><a class="btn_roles" href="javascript:void(0);">Roles</a></li>'+
					 '</ul>'
						return [htmlString].join('');
				
        
	}

	delete require.cache[require.resolve('./assets/plugins')]
	require('./assets/plugins');


</script>